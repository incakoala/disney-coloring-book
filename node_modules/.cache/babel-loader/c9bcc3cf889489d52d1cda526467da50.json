{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/Hilary/Documents/CodeProjects/project-disney_villains/src/components/userImageCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext, useRef } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Link } from 'react-router-dom';\nimport UserContext from \"../context/UserContext\";\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport ColoredInImage from \"./images/coloredInImage\";\nexport default function UserImageCard(props) {\n  _s();\n\n  let {\n    userImage\n  } = useParams();\n  const [image, setImage] = useState({});\n  const {\n    userData\n  } = useContext(UserContext);\n  const history = useHistory();\n  const [fetched, setFetched] = useState(false); // useEffect(() => {\n  //     setImage(props.userImage)\n  //     // console.log(image)\n  // }, [props])\n\n  useEffect(() => {\n    const fetchItems = async () => {\n      if (!fetched) {\n        const response = await axios.get(`http://localhost:5000/user_images/${userImage}`, {\n          headers: {\n            \"x-auth-token\": userData.token\n          }\n        });\n        setImage(response.data);\n        console.log(response.data);\n        setFetched(true);\n      }\n    };\n\n    fetchItems();\n  });\n\n  const downloadImage = () => {\n    history.push(`/imageDownload/${image._id}`);\n  };\n\n  const deleteImage = async () => {\n    if (!userData.token) {\n      history.push(\"/userGallery\");\n      return;\n    }\n\n    swal({\n      title: \"Delete image?\",\n      text: \"This cannot be reversed.\",\n      buttons: true\n    }).then(async willDelete => {\n      if (willDelete) {\n        const response = await axios.delete(`http://localhost:5000/user_images/${image._id}`, {\n          headers: {\n            \"x-auth-token\": userData.token\n          }\n        });\n        console.log(response);\n      }\n    });\n  };\n\n  const editImage = () => {\n    history.push(`/coloringpage/${image._id}`);\n  };\n\n  const changePublicity = async () => {\n    let res = image.public === false ? image.public = true : image.public = false;\n    image.public = res;\n    setImage({ ...image\n    });\n\n    try {\n      const response = await axios.patch(`http://localhost:5000/user_images/${image._id}`, image, {\n        headers: {\n          \"x-auth-token\": userData.token\n        }\n      });\n      console.log(image);\n      console.log(response);\n    } catch (err) {\n      console.log(\"Unable to save\");\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"image-card\",\n    children: [userData.token, image.component !== undefined ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(ColoredInImage, {\n        component: image.component,\n        size: props.size,\n        onFill: () => {},\n        fillColors: image.fill_colors\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"btn-group\",\n        id: \"user\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"download\",\n          onClick: () => downloadImage(),\n          children: \"Download\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"delete\",\n          onClick: () => deleteImage(),\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"color-me\",\n          onClick: () => editImage(),\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          class: \"public\",\n          onClick: () => changePublicity(),\n          children: \"Publicize\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: \"Loading\"\n    }, void 0, false)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 9\n  }, this) // <div className=\"col-4 mx-4 my-4 mt-auto\">\n  //     {image.component !== undefined ?\n  //             <>\n  //             <ColoredInImage component={image.component} size={props.size} onFill={() => { }} fillColors={image.fill_colors} />\n  //             <div class=\"btn-group\">\n  //                 <button class=\"download\" onClick={() => downloadImage()}>Download</button>\n  //                 <button class=\"delete\" onClick={() => deleteImage(image._id)}>Delete</button>\n  //                 <button class=\"color-me\" onClick={() => editImage()}>Edit</button>\n  //             </div>\n  //             </>\n  //         : <>Loading</>\n  //     }\n  // </div>\n  ;\n}\n\n_s(UserImageCard, \"dzuJ1tj9e0B1LvyNCnQ9K7ArxjM=\", false, function () {\n  return [useParams, useHistory];\n});\n\n_c = UserImageCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"UserImageCard\");","map":{"version":3,"sources":["/Users/Hilary/Documents/CodeProjects/project-disney_villains/src/components/userImageCard.js"],"names":["React","useState","useEffect","useContext","useRef","useParams","useHistory","Link","UserContext","axios","swal","ColoredInImage","UserImageCard","props","userImage","image","setImage","userData","history","fetched","setFetched","fetchItems","response","get","headers","token","data","console","log","downloadImage","push","_id","deleteImage","title","text","buttons","then","willDelete","delete","editImage","changePublicity","res","public","patch","err","component","undefined","size","fill_colors"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,UAArC,EAAiDC,MAAjD,QAA+D,OAA/D;AACA,SAASC,SAAT,EAAoBC,UAApB,QAAsC,kBAAtC;AACA,SAASC,IAAT,QAAqB,kBAArB;AACA,OAAOC,WAAP,MAAwB,wBAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,YAAjB;AACA,OAAOC,cAAP,MAA2B,yBAA3B;AAEA,eAAe,SAASC,aAAT,CAAuBC,KAAvB,EAA8B;AAAA;;AACzC,MAAI;AAAEC,IAAAA;AAAF,MAAeT,SAAS,EAA5B;AAEA,QAAM,CAACU,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM;AAAEgB,IAAAA;AAAF,MAAed,UAAU,CAACK,WAAD,CAA/B;AACA,QAAMU,OAAO,GAAGZ,UAAU,EAA1B;AACA,QAAM,CAACa,OAAD,EAAUC,UAAV,IAAwBnB,QAAQ,CAAC,KAAD,CAAtC,CANyC,CASzC;AACA;AACA;AACA;;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZ,UAAMmB,UAAU,GAAG,YAAY;AAC3B,UAAI,CAACF,OAAL,EAAc;AACd,cAAMG,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAN,CAClB,qCAAoCT,SAAU,EAD5B,EAEnB;AAAEU,UAAAA,OAAO,EAAE;AAAE,4BAAgBP,QAAQ,CAACQ;AAA3B;AAAX,SAFmB,CAAvB;AAIAT,QAAAA,QAAQ,CAACM,QAAQ,CAACI,IAAV,CAAR;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACI,IAArB;AACAN,QAAAA,UAAU,CAAC,IAAD,CAAV;AACH;AACJ,KAVG;;AAWAC,IAAAA,UAAU;AACb,GAbQ,CAAT;;AAeA,QAAMQ,aAAa,GAAG,MAAM;AACxBX,IAAAA,OAAO,CAACY,IAAR,CAAc,kBAAiBf,KAAK,CAACgB,GAAI,EAAzC;AACH,GAFD;;AAIA,QAAMC,WAAW,GAAG,YAAY;AAC5B,QAAI,CAACf,QAAQ,CAACQ,KAAd,EAAqB;AACjBP,MAAAA,OAAO,CAACY,IAAR,CAAa,cAAb;AACA;AACH;;AACDpB,IAAAA,IAAI,CAAC;AACDuB,MAAAA,KAAK,EAAE,eADN;AAEDC,MAAAA,IAAI,EAAE,0BAFL;AAGDC,MAAAA,OAAO,EAAE;AAHR,KAAD,CAAJ,CAKKC,IALL,CAKU,MAAOC,UAAP,IAAsB;AACxB,UAAIA,UAAJ,EAAgB;AACZ,cAAMf,QAAQ,GAAG,MAAMb,KAAK,CAAC6B,MAAN,CAClB,qCAAoCvB,KAAK,CAACgB,GAAI,EAD5B,EAEnB;AAAEP,UAAAA,OAAO,EAAE;AAAE,4BAAgBP,QAAQ,CAACQ;AAA3B;AAAX,SAFmB,CAAvB;AAIAE,QAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AACH;AACJ,KAbL;AAcH,GAnBD;;AAqBA,QAAMiB,SAAS,GAAG,MAAM;AACpBrB,IAAAA,OAAO,CAACY,IAAR,CAAc,iBAAgBf,KAAK,CAACgB,GAAI,EAAxC;AACH,GAFD;;AAIA,QAAMS,eAAe,GAAG,YAAY;AAChC,QAAIC,GAAG,GAAG1B,KAAK,CAAC2B,MAAN,KAAiB,KAAjB,GAAyB3B,KAAK,CAAC2B,MAAN,GAAe,IAAxC,GAA+C3B,KAAK,CAAC2B,MAAN,GAAe,KAAxE;AACA3B,IAAAA,KAAK,CAAC2B,MAAN,GAAeD,GAAf;AACAzB,IAAAA,QAAQ,CAAC,EACL,GAAGD;AADE,KAAD,CAAR;;AAIA,QAAI;AACA,YAAMO,QAAQ,GAAG,MAAMb,KAAK,CAACkC,KAAN,CAClB,qCAAoC5B,KAAK,CAACgB,GAAI,EAD5B,EAEnBhB,KAFmB,EAGnB;AAAES,QAAAA,OAAO,EAAE;AAAE,0BAAgBP,QAAQ,CAACQ;AAA3B;AAAX,OAHmB,CAAvB;AAKAE,MAAAA,OAAO,CAACC,GAAR,CAAYb,KAAZ;AACAY,MAAAA,OAAO,CAACC,GAAR,CAAYN,QAAZ;AACH,KARD,CAQE,OAAOsB,GAAP,EAAY;AACVjB,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ;AACH;AACJ,GAlBD;;AAoBA,sBACI;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA,eACKX,QAAQ,CAACQ,KADd,EAEKV,KAAK,CAAC8B,SAAN,KAAoBC,SAApB,gBACG;AAAA,8BACI,QAAC,cAAD;AAAgB,QAAA,SAAS,EAAE/B,KAAK,CAAC8B,SAAjC;AAA4C,QAAA,IAAI,EAAEhC,KAAK,CAACkC,IAAxD;AAA8D,QAAA,MAAM,EAAE,MAAM,CAAG,CAA/E;AAAiF,QAAA,UAAU,EAAEhC,KAAK,CAACiC;AAAnG;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI;AAAK,QAAA,KAAK,EAAC,WAAX;AAAuB,QAAA,EAAE,EAAC,MAA1B;AAAA,gCACI;AAAQ,UAAA,KAAK,EAAC,UAAd;AAAyB,UAAA,OAAO,EAAE,MAAMnB,aAAa,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,UAAA,KAAK,EAAC,QAAd;AAAuB,UAAA,OAAO,EAAE,MAAMG,WAAW,EAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAGI;AAAQ,UAAA,KAAK,EAAC,UAAd;AAAyB,UAAA,OAAO,EAAE,MAAMO,SAAS,EAAjD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAII;AAAQ,UAAA,KAAK,EAAC,QAAd;AAAuB,UAAA,OAAO,EAAE,MAAMC,eAAe,EAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA,oBADH,gBAUK;AAAA;AAAA,qBAZV;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ,CAiBI;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA7BJ;AAgCH;;GA9GuB5B,a;UACDP,S,EAIHC,U;;;KALIM,a","sourcesContent":["import React, { useState, useEffect, useContext, useRef } from \"react\";\nimport { useParams, useHistory } from \"react-router-dom\";\nimport { Link } from 'react-router-dom';\nimport UserContext from \"../context/UserContext\";\nimport axios from 'axios';\nimport swal from 'sweetalert';\nimport ColoredInImage from \"./images/coloredInImage\";\n\nexport default function UserImageCard(props) {\n    let { userImage} = useParams();\n\n    const [image, setImage] = useState({});\n    const { userData } = useContext(UserContext);\n    const history = useHistory();\n    const [fetched, setFetched] = useState(false);\n\n\n    // useEffect(() => {\n    //     setImage(props.userImage)\n    //     // console.log(image)\n    // }, [props])\n\n    useEffect(() => {\n        const fetchItems = async () => {\n            if (!fetched) {\n            const response = await axios.get(\n                `http://localhost:5000/user_images/${userImage}`,\n                { headers: { \"x-auth-token\": userData.token } },\n            );\n            setImage(response.data);\n            console.log(response.data)\n            setFetched(true)\n        }\n    }\n        fetchItems();\n    })\n\n    const downloadImage = () => {\n        history.push(`/imageDownload/${image._id}`)\n    }\n\n    const deleteImage = async () => {\n        if (!userData.token) {\n            history.push(\"/userGallery\")\n            return\n        }\n        swal({\n            title: \"Delete image?\",\n            text: \"This cannot be reversed.\",\n            buttons: true\n        })\n            .then(async (willDelete) => {\n                if (willDelete) {\n                    const response = await axios.delete(\n                        `http://localhost:5000/user_images/${image._id}`,\n                        { headers: { \"x-auth-token\": userData.token } },\n                    );\n                    console.log(response);\n                }\n            });\n    }\n\n    const editImage = () => {\n        history.push(`/coloringpage/${image._id}`)\n    }\n\n    const changePublicity = async () => {\n        let res = image.public === false ? image.public = true : image.public = false\n        image.public = res\n        setImage({\n            ...image\n        })\n\n        try {\n            const response = await axios.patch(\n                `http://localhost:5000/user_images/${image._id}`,\n                image,\n                { headers: { \"x-auth-token\": userData.token } },\n            );\n            console.log(image)\n            console.log(response);\n        } catch (err) {\n            console.log(\"Unable to save\");\n        }\n    }\n\n    return (\n        <div className=\"image-card\">\n            {userData.token}\n            {image.component !== undefined ?\n                <>\n                    <ColoredInImage component={image.component} size={props.size} onFill={() => { }} fillColors={image.fill_colors} />\n                    <div class=\"btn-group\" id=\"user\">\n                        <button class=\"download\" onClick={() => downloadImage()}>Download</button>\n                        <button class=\"delete\" onClick={() => deleteImage()}>Delete</button>\n                        <button class=\"color-me\" onClick={() => editImage()}>Edit</button>\n                        <button class=\"public\" onClick={() => changePublicity()}>Publicize</button>\n                    </div>\n                </>\n                : <>Loading</>\n            }\n        </div>\n\n        // <div className=\"col-4 mx-4 my-4 mt-auto\">\n        //     {image.component !== undefined ?\n        //             <>\n        //             <ColoredInImage component={image.component} size={props.size} onFill={() => { }} fillColors={image.fill_colors} />\n        //             <div class=\"btn-group\">\n        //                 <button class=\"download\" onClick={() => downloadImage()}>Download</button>\n        //                 <button class=\"delete\" onClick={() => deleteImage(image._id)}>Delete</button>\n        //                 <button class=\"color-me\" onClick={() => editImage()}>Edit</button>\n        //             </div>\n        //             </>\n        //         : <>Loading</>\n        //     }\n        // </div>\n\n    )\n}"]},"metadata":{},"sourceType":"module"}